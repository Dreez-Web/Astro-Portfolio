---
// ThemeToggle.astro
import Moon from "../components/Icons/Moon.astro";
import Sun from "../components/Icons/Sun.astro";
---

<img id="theme-toggle" src="../src/assets/moon.svg" alt="" />

<script>
  // Obtener el botón del interruptor
  const darkmode = document.getElementById("theme-toggle");

  // Verificar si hay un tema guardado en localStorage
  const savedTheme = localStorage.getItem("theme");

  // Aplicar el tema guardado al cargar la página
  if (savedTheme === "dark") {
    document.documentElement.classList.add("dark");
  } else if (savedTheme === "light") {
    document.documentElement.classList.remove("dark");
  }

  // Alternar entre claro y oscuro al hacer clic
  if (darkmode) {
    darkmode.addEventListener("click", () => {
      const isDark = document.documentElement.classList.toggle("dark");
      if (document.documentElement.classList.contains("dark")) {
        (darkmode as HTMLImageElement).src = "../src/assets/sun.svg";
      } else {
        (darkmode as HTMLImageElement).src = "../src/assets/moon.svg";
      }
    });
  }
</script>
